{
  "hash": "e93313c5e7ef9065e3408e0f16e7cfbf",
  "result": {
    "markdown": "---\ntitle: \"시각화\"\ndescription: \"데이터프레임 시각화를 학습합니다.\"\ndate: today # 날짜 설정: now, last-modified\nauthor:\n  - name: 이광춘\n    affiliation: TCS\ntitle-block-banner: false\nformat:\n  html:\n    theme: \n      - flatly\n      - css/quarto-fonts.css\n    code-fold: false\n    code-overflow: scroll\n    toc: true\n    toc-depth: 3\n    number-sections: true\n    highlight-style: github    \n    self-contained: false\neditor_options: \n  chunk_output_type: console\nknitr:\n  opts_chunk: \n    collapse: true\n    comment: \"#>\" \n    R.options:\n      knitr.graphics.auto_pdf: true  \nfilters:\n   - lightbox\nlightbox: auto      \n---\n\n\n# 그래프 문법\n\n- [데이터 시각화 - 그래프 문법 실무](https://aispiration.com/viz/viz-ggplot2-practice.html)\n\n\n# 시각화 패키지\n\n- 정적 그래프\n  - [`plotnine`](https://github.com/has2k1/plotnine)\n  - [`matplotlib`](https://github.com/matplotlib/matplotlib)\n    - NumPy 친화적 그래픽 패키지\n  - [`seaborn`](https://github.com/mwaskom/seaborn)\n    - `matplotlib` 을 기반으로 하고 `pandas` 자료구조 친화적 그래픽 패키지\n- 인터랙티브 그래프    \n  - [`plotly`](https://plotly.com/python/)\n  - [`bokeh`](https://bokeh.org/)\n\n\n# 헬로월드\n\n동일한 시각화 그래프를 다양한 패키지를 활용하여 시각화해보자.\n`seaborn`, `plotnine` 패키지를 사전에 설치한다.\n\n```bash\n$ pip3 install seaborn\n$ pip3 install plotnine\n```\n\n\n::: {.panel-tabset}\n\n### `ggplot`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gapminder)\n\nggplot(data = gapminder, aes(x = lifeExp, y = gdpPercap)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](99_viz_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n### `plotnine`\n\n\n::: {.cell}\n\n```{.python .cell-code}\nfrom plotnine import *\nfrom gapminder import gapminder\n\n( ggplot(gapminder)\n   + geom_point(aes('lifeExp', 'gdpPercap'))\n)\n#> <ggplot: (161573666082)>\n```\n\n::: {.cell-output-display}\n![](99_viz_files/figure-html/unnamed-chunk-2-1.png){width=614}\n:::\n:::\n\n\n### `matplotlib`\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport matplotlib.pyplot as plt\nfrom gapminder import gapminder\n\n# 산점도 정의\nplt.scatter(gapminder['lifeExp'], gapminder['gdpPercap'])\n\n# 축 라벨 추가\nplt.xlabel('Life Expectancy')\nplt.ylabel('GDP per Capita')\n\n# 그래프 보이기\nplt.show()\n```\n\n::: {.cell-output-display}\n![](99_viz_files/figure-html/unnamed-chunk-3-3.png){width=614}\n:::\n:::\n\n\n### `seaborn`\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport seaborn as sns\nfrom gapminder import gapminder\n\n# 산점도 정의\nsns.scatterplot(x='lifeExp', y='gdpPercap', data=gapminder)\n\n# 축 라벨 추가\nplt.xlabel('Life Expectancy')\nplt.ylabel('GDP per Capita')\n\n# 그래프 보이기\nplt.show()\n```\n\n::: {.cell-output-display}\n![](99_viz_files/figure-html/unnamed-chunk-4-5.png){width=614}\n:::\n:::\n\n\n:::\n\n\n# 그래프 문법\n\n- [그래프 문법 - `ggplot`](https://aispiration.com/viz/viz-ggplot2-practice.html)\n\n## 시각화 연습 1\n\n::: {.panel-tabset}\n\n### `ggplot`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gapminder)\n\ngapminder %>% \n  ggplot(aes(x=year, y=lifeExp, group = country, color=continent)) +\n    geom_line() +\n    labs(x = \"연도\", y = \"기대수명\",\n         title = \"국가별 평균 기대수명 변화 추이\")\n```\n\n::: {.cell-output-display}\n![](99_viz_files/figure-html/unnamed-chunk-5-7.png){width=672}\n:::\n:::\n\n\n### `plotnine`\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport matplotlib.pyplot as plt \nimport plotnine as p9\nfrom gapminder import gapminder\n\n( p9.ggplot(gapminder)\n    + p9.aes(x='year', y='lifeExp', group='country', color='continent')\n    + p9.geom_line()\n    + p9.labs(x='연도', y='기대수명', title='국가별 평균 기대수명 변화 추이') \n)\n#> <ggplot: (161579175412)>\n#> \n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 50672 (\\N{HANGUL SYLLABLE YEON}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 46020 (\\N{HANGUL SYLLABLE DO}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44592 (\\N{HANGUL SYLLABLE GI}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 45824 (\\N{HANGUL SYLLABLE DAE}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 49688 (\\N{HANGUL SYLLABLE SU}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 47749 (\\N{HANGUL SYLLABLE MYEONG}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44397 (\\N{HANGUL SYLLABLE GUG}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44032 (\\N{HANGUL SYLLABLE GA}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 48324 (\\N{HANGUL SYLLABLE BYEOL}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 54217 (\\N{HANGUL SYLLABLE PYEONG}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44512 (\\N{HANGUL SYLLABLE GYUN}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 48320 (\\N{HANGUL SYLLABLE BYEON}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 54868 (\\N{HANGUL SYLLABLE HWA}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 52628 (\\N{HANGUL SYLLABLE CU}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 51060 (\\N{HANGUL SYLLABLE I}) missing from current font.\n```\n\n::: {.cell-output-display}\n![](99_viz_files/figure-html/unnamed-chunk-6-1.png){width=614}\n:::\n:::\n\n\n### `matplotlib`\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport matplotlib.pyplot as plt\nfrom gapminder import gapminder\n\nplt.figure(figsize=(10,5))\n\ncontinent_colors = {'Africa':'red', 'Americas':'blue', 'Asia':'green', 'Europe':'black', 'Oceania':'purple'}\n\nfor continent, group in gapminder.groupby('continent'):\n    color = continent_colors[continent]\n    for country, sub_group in group.groupby('country'):\n        plt.plot(sub_group['year'], sub_group['lifeExp'], color = color)\n\nplt.xlabel(\"연도\")\nplt.ylabel(\"기대수명\")\nplt.title(\"국가별 평균 기대수명 변화 추이\")\n\n# create a custom legend\nfor continent, color in continent_colors.items():\n    plt.scatter([], [], c=color, label=continent)\n    \nplt.legend(scatterpoints=1, frameon=False, labelspacing=0.3, bbox_to_anchor=(1.1, 1), loc='upper right', bbox_transform=plt.gcf().transFigure)\n\nplt.show()\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44397 (\\N{HANGUL SYLLABLE GUG}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44032 (\\N{HANGUL SYLLABLE GA}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 48324 (\\N{HANGUL SYLLABLE BYEOL}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 54217 (\\N{HANGUL SYLLABLE PYEONG}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44512 (\\N{HANGUL SYLLABLE GYUN}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44592 (\\N{HANGUL SYLLABLE GI}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 45824 (\\N{HANGUL SYLLABLE DAE}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 49688 (\\N{HANGUL SYLLABLE SU}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 47749 (\\N{HANGUL SYLLABLE MYEONG}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 48320 (\\N{HANGUL SYLLABLE BYEON}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 54868 (\\N{HANGUL SYLLABLE HWA}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 52628 (\\N{HANGUL SYLLABLE CU}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 51060 (\\N{HANGUL SYLLABLE I}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 50672 (\\N{HANGUL SYLLABLE YEON}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 46020 (\\N{HANGUL SYLLABLE DO}) missing from current font.\n```\n\n::: {.cell-output-display}\n![](99_viz_files/figure-html/unnamed-chunk-7-3.png){width=960}\n:::\n:::\n\n\n### `seaborn`\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport matplotlib.pyplot as plt\nfrom gapminder import gapminder\n\nimport seaborn as sns\n\ncontinent_colors = {'Africa':'red', 'Americas':'blue', 'Asia':'green', 'Europe':'black', 'Oceania':'purple'}\n\nsns.set(rc={'figure.figsize':(10,5)})\n\nfor continent, group in gapminder.groupby('continent'):\n    color = continent_colors[continent]\n    for country, sub_group in group.groupby('country'):\n        sns.lineplot(x=\"year\", y=\"lifeExp\", data=sub_group, color=color)\n\nplt.xlabel(\"연도\")\nplt.ylabel(\"기대수명\")\nplt.title(\"국가별 평균 기대수명 변화 추이\")\n\n# create a custom legend\nfor continent, color in continent_colors.items():\n    plt.scatter([], [], c=color, label=continent)\n    \nplt.legend(scatterpoints=1, frameon=False, labelspacing=0.3, bbox_to_anchor=(1.1, 1), loc='upper right', bbox_transform=plt.gcf().transFigure)    \n\nplt.show()\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 50672 (\\N{HANGUL SYLLABLE YEON}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 46020 (\\N{HANGUL SYLLABLE DO}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44397 (\\N{HANGUL SYLLABLE GUG}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44032 (\\N{HANGUL SYLLABLE GA}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 48324 (\\N{HANGUL SYLLABLE BYEOL}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 54217 (\\N{HANGUL SYLLABLE PYEONG}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44512 (\\N{HANGUL SYLLABLE GYUN}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 44592 (\\N{HANGUL SYLLABLE GI}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 45824 (\\N{HANGUL SYLLABLE DAE}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 49688 (\\N{HANGUL SYLLABLE SU}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 47749 (\\N{HANGUL SYLLABLE MYEONG}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 48320 (\\N{HANGUL SYLLABLE BYEON}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 54868 (\\N{HANGUL SYLLABLE HWA}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 52628 (\\N{HANGUL SYLLABLE CU}) missing from current font.\n#> C:\\Users\\statkclee\\AppData\\Local\\R\\win-library\\4.2\\reticulate\\python\\rpytools\\call.py:13: UserWarning: Glyph 51060 (\\N{HANGUL SYLLABLE I}) missing from current font.\n```\n\n::: {.cell-output-display}\n![](99_viz_files/figure-html/unnamed-chunk-8-5.png){width=960}\n:::\n:::\n\n\n\n:::\n\n\n## 시각화 연습 2\n\n\n2002년 기준 각 대륙별 1인당 GDP와 평균수명을 시각화하세요.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngapminder::gapminder %>% \n  filter(year == 2002) %>% \n  ggplot() + \n    aes(x = gdpPercap) + \n    aes(y = lifeExp) + \n    geom_point() + \n    aes(color = continent) + \n    aes(size = pop/1000000) + \n    labs(size = \"Population\\n(millions)\") + \n    labs(color = NULL) + \n    labs(x = \"Per Capita GDP ($US)\") + \n    labs(y = \"Life expecancy (years)\") + \n    labs(title = \"Life expectancy vs Per Capita GDP, 2002\") + \n    labs(subtitle = \"Data Source: gapminder package\") + \n    labs(caption = \"Produced for MA206 in Fall AY2023\") + \n    facet_wrap(~ continent)\n```\n\n::: {.cell-output-display}\n![](99_viz_files/figure-html/unnamed-chunk-9-7.png){width=672}\n:::\n:::\n\n```\n",
    "supporting": [
      "99_viz_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}